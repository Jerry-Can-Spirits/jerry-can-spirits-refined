---
// src/components/Signup.astro
export interface Props {
  variant?: 'default' | 'compact' | 'hero';
  showConsent?: boolean;
}

const { 
  variant = 'default',
  showConsent = true 
} = Astro.props;
---

<section id="signup" class={`signup-section ${variant}`}>
  <div class="container">
    <div class="signup-content">
      <div class="signup-header">
        <span class="section-label">Join Us</span>
        <h2 class="section-title">Become an Insider</h2>
        <p class="section-description">
          Be the first to know. Join the Jerry Can Spirits expeditionary force for exclusive launch details, 
          stories from the field, and special offers reserved for our earliest supporters.
        </p>
      </div>
      
      <!-- Klaviyo form div - this will be replaced by Klaviyo's embedded form -->
      <div class="klaviyo-form-QZ76XT"></div>
      
      <!-- Fallback form if Klaviyo doesn't load -->
      <form class="signup-form fallback" id="signup-form" style="display: none;">
        <div class="form-row">
          <div class="form-group">
            <label for="signup-email" class="visually-hidden">Email Address</label>
            <input 
              type="email" 
              id="signup-email"
              name="email"
              placeholder="Enter your email address"
              required
              aria-label="Email address"
              class="form-input"
            />
          </div>
          
          <button type="submit" class="submit-button">
            <span class="button-text">Join Now</span>
            <span class="button-loader"></span>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="button-icon">
              <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
            </svg>
          </button>
        </div>
        
        {showConsent && (
          <div class="form-group consent">
            <input 
              type="checkbox" 
              id="consent-checkbox"
              name="consent"
              required
              aria-describedby="consent-text"
            />
            <label for="consent-checkbox" id="consent-text">
              I agree to receive marketing communications from Jerry Can Spirits. 
              I can unsubscribe at any time. View our 
              <a href="/privacy-policy" target="_blank">Privacy Policy</a>.
            </label>
          </div>
        )}
        
        <div class="form-message" role="alert" aria-live="polite"></div>
      </form>
      
      <!-- Trust indicators -->
      <div class="trust-indicators">
        <div class="trust-item">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
            <path d="M9 12l2 2 4-4"/>
          </svg>
          <span>No spam, ever</span>
        </div>
        <div class="trust-item">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="10" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0110 0v4"/>
          </svg>
          <span>Your data is secure</span>
        </div>
        <div class="trust-item">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
            <path d="M2 17l10 5 10-5M2 12l10 5 10-5"/>
          </svg>
          <span>Exclusive content</span>
        </div>
      </div>
    </div>
  </div>
</section>

<script src="../scripts/js/signup-form.js"></script>